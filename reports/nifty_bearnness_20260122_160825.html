<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="900">  <!-- Auto-refresh every 15 min -->
    <title>Nifty Stock Analyser - 2026-01-22 16:08:25</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; margin: 0; padding: 16px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; }
        .container { max-width: 1600px; margin: 0 auto; padding: 0 20px; }
        h2 { color: #1a202c; margin: 0 0 8px 0; font-size: 32px; font-weight: 700; letter-spacing: -0.5px; }
        h3 { color: #2d3748; margin: 24px 0 16px 0; font-size: 18px; font-weight: 600; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
        h4 { color: #2d3748; margin: 0 0 12px 0; font-size: 15px; font-weight: 600; }
        p.info { color: #718096; margin: 8px 0; font-size: 14px; display: flex; gap: 24px; flex-wrap: wrap; }
        p.info strong { color: #2d3748; font-weight: 600; }
        p.info strong { color: #2d3748; font-weight: 600; }
        
        /* DASHBOARD SECTIONS */
        .dashboard { background: transparent; border-radius: 0; padding: 0; margin-bottom: 0; box-shadow: none; }
        .metrics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 12px; margin: 16px 0; }
        .metric-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15); transition: transform 0.2s, box-shadow 0.2s; cursor: default; }
        .metric-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.25); }
        .metric-card.bullish { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .metric-card.bearish { background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); }
        .metric-card.neutral { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .metric-value { font-size: 28px; font-weight: 700; margin: 8px 0; font-family: 'JetBrains Mono', monospace; }
        .metric-label { font-size: 12px; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 500; }
        .metric-subtext { font-size: 11px; opacity: 0.8; margin-top: 6px; }
        
        .insights-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; margin: 16px 0; }
        .insight-box { background: white; border-left: 5px solid #667eea; padding: 16px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); transition: all 0.2s; }
        .insight-box:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.12); transform: translateY(-2px); }
        .insight-box.bull { border-left-color: #38ef7d; }
        .insight-box.bear { border-left-color: #ff6a00; }
        .insight-title { font-weight: 600; color: #2d3748; font-size: 13px; text-transform: uppercase; margin-bottom: 8px; }
        .insight-content { font-size: 13px; color: #4a5568; line-height: 1.6; }
        .insight-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #e2e8f0; }
        .insight-item:last-child { border-bottom: none; }
        .insight-name { font-weight: 500; color: #2d3748; }
        .insight-value { font-weight: 600; color: #667eea; font-family: 'JetBrains Mono', monospace; }
        
        .risk-matrix { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin: 16px 0; }
        .risk-card { background: white; border: 2px solid #e2e8f0; border-radius: 10px; padding: 16px; text-align: center; transition: all 0.2s; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
        .risk-card:hover { border-color: #667eea; box-shadow: 0 6px 16px rgba(102, 126, 234, 0.15); transform: translateY(-3px); }
        .risk-symbol { font-weight: 700; font-size: 16px; font-family: 'JetBrains Mono', monospace; color: #2d3748; }
        .risk-metric { font-size: 11px; color: #718096; margin-top: 4px; }
        .risk-rr { font-weight: 600; color: #11998e; font-family: 'JetBrains Mono', monospace; }
        
        /* TOP PICKS SECTION */
        .top-picks-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 16px 0;
        }
        
        .picks-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 5px solid;
        }
        
        .picks-card.bullish {
            border-left-color: #38ef7d;
            background: linear-gradient(to right, rgba(56, 239, 125, 0.03), transparent);
        }
        
        .picks-card.bearish {
            border-left-color: #ff6a00;
            background: linear-gradient(to right, rgba(255, 106, 0, 0.03), transparent);
        }
        
        .picks-card h4 {
            margin: 0 0 12px 0;
            color: #2d3748;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .pick-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #edf2f7;
            font-size: 13px;
        }
        
        .pick-item:last-child {
            border-bottom: none;
        }
        
        .pick-symbol {
            font-weight: 600;
            color: #2d3748;
            font-family: 'JetBrains Mono', monospace;
            min-width: 70px;
        }
        
        .pick-score {
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .pick-score.bull {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .pick-score.bear {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .pick-details {
            color: #718096;
            font-size: 12px;
            text-align: right;
        }
        
        .sector-heatmap {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }
        
        .sector-card {
            padding: 16px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.2s ease;
            cursor: default;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .sector-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
        }
        
        .sector-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 8px;
            color: #2d3748;
        }
        
        .sector-score {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .sector-count {
            font-size: 12px;
            opacity: 0.85;
            line-height: 1.4;
        }
        
        /* MAIN TABLE STYLES */
        #screener-wrapper { overflow-x: auto; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); margin-bottom: 24px; }
        table { border-collapse: collapse; width: 100%; font-size: 11px; background-color: white; box-shadow: none; }
        th, td { border: 1px solid #e8eef7; padding: 8px 6px; text-align: left; }
        th { background: #f5f8fc; cursor: pointer; position: relative; font-weight: 600; color: #2d3748; font-family: 'Inter', sans-serif; white-space: nowrap; }
        th.sort-asc::after { content: " ‚ñ≤"; font-size: 9px; color: #667eea; }
        th.sort-desc::after { content: " ‚ñº"; font-size: 9px; color: #667eea; }
        tr:hover { background-color: #f9fbfd; }
        td { font-family: 'Inter', sans-serif; color: #4a5568; }
        td.mono { font-family: 'JetBrains Mono', monospace; font-size: 10px; }
        
        .badge { display: inline-block; padding: 3px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.3px; white-space: nowrap; }
        .tag-bear { background: #fed7d7; color: #742a2a; }
        .tag-bull { background: #c6f6d5; color: #22543d; }
        .tag-neutral { background: #e2e8f0; color: #2d3748; }
        
        .controls { margin-bottom: 12px; padding: 12px; background: white; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
        .search { padding: 8px 10px; border: 1px solid #e2e8f0; border-radius: 6px; width: 250px; font-family: 'Inter', sans-serif; font-size: 12px; transition: border-color 0.3s; }
        .search:focus { outline: none; border-color: #667eea; background: #f9fbfd; }
        .control-group { margin: 6px 0; display: inline-block; margin-right: 12px; }
        input[type="range"] { vertical-align: middle; margin: 0 6px; height: 4px; }
        label { margin-right: 6px; font-size: 12px; font-weight: 500; color: #2d3748; }
        select { padding: 6px 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-family: 'Inter', sans-serif; font-size: 12px; cursor: pointer; transition: border-color 0.3s; }
        select:focus { outline: none; border-color: #667eea; background: #f7fafc; }
        
        .no-data { color: #a0aec0; font-style: italic; margin-top: 15px; padding: 10px; }
        .score { font-weight: 700; border-radius: 4px; font-family: 'JetBrains Mono', monospace; }
        .grade-a { background-color: #11998e; color: white; }
        .grade-b { background-color: #38ef7d; color: #22543d; }
        .grade-c { background-color: #f6ad55; color: white; }
        .grade-d { background-color: #fc8181; color: white; }
        .grade-f { background-color: #f56565; color: white; }
        
        .trend-strong-bull { background-color: #11998e; color: white; }
        .trend-bull { background-color: #38ef7d; color: #22543d; }
        .trend-neutral { background-color: #cbd5e0; color: #2d3748; }
        .trend-bear { background-color: #fc8181; color: white; }
        .trend-strong-bear { background-color: #f56565; color: white; }
        
        .regime-trending { background-color: #4299e1; color: white; }
        .regime-ranging { background-color: #a0aec0; color: white; }
        .regime-volatile { background-color: #f56565; color: white; }
        .regime-quiet { background-color: #cbd5e0; color: #2d3748; }
        
        /* Strategy Badge Styles */
        .long-call { background-color: #11998e; color: white; font-weight: 600; }
        .bull-call { background-color: #38ef7d; color: #22543d; font-weight: 600; }
        .lcall-spread { background-color: #81e6d9; color: #234e52; font-weight: 600; }
        .atm-call { background-color: #4299e1; color: white; font-weight: 600; }
        .call-diagonal { background-color: #63b3ed; color: white; font-weight: 600; }
        .call-calendar { background-color: #90cdf4; color: #2c5282; font-weight: 600; }
        
        .long-put { background-color: #f56565; color: white; font-weight: 600; }
        .bear-put { background-color: #fc8181; color: white; font-weight: 600; }
        .put-spread { background-color: #ed8936; color: white; font-weight: 600; }
        
        /* Support/Resistance Styles */
        .method-sr { background-color: #4299e1; color: white; font-weight: 600; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .method-atr { background-color: #a0aec0; color: white; font-weight: 600; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .level-support { color: #22863a; font-weight: 600; background-color: #f0fff4; padding: 4px 6px; border-radius: 3px; }
        .level-resistance { color: #cb2431; font-weight: 600; background-color: #fff0f0; padding: 4px 6px; border-radius: 3px; }
        
        /* Risk Zone Styles */
        .risk-normal { background-color: #c6f6d5; color: #22543d; font-weight: 600; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .risk-medium { background-color: #feebc8; color: #7c2d12; font-weight: 600; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .risk-high { background-color: #fed7d7; color: #742a2a; font-weight: 600; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .zone-label { font-size: 10px; opacity: 0.8; }
        .atm-put { background-color: #f6ad55; color: white; font-weight: 600; }
        .put-diagonal { background-color: #fbd38d; color: #7c2d12; font-weight: 600; }
        .put-calendar { background-color: #feebc8; color: #7c2d12; font-weight: 600; }
        
        .iron-condor { background-color: #9f7aea; color: white; font-weight: 600; }
        .straddle { background-color: #b794f6; color: white; font-weight: 600; }
        .strangle { background-color: #d6bcfa; color: #44337a; font-weight: 600; }
        .covered-call { background-color: #ecc94b; color: #7c2d12; font-weight: 600; }
        .neutral-strategy { background-color: #e2e8f0; color: #2d3748; font-weight: 600; }
        
        .strategy-trending-short { background-color: #f56565; color: white; font-weight: 600; }
        .strategy-trending-long { background-color: #11998e; color: white; font-weight: 600; }
        .strategy-pullback-short { background-color: #f6ad55; color: white; }
        .strategy-pullback-long { background-color: #4299e1; color: white; }
        .strategy-fade { background-color: #9f7aea; color: white; }
        .strategy-range { background-color: #38b6a8; color: white; }
        .strategy-breakout { background-color: #ed8936; color: white; }
        .strategy-swing-short { background-color: #c53030; color: white; }
        .strategy-swing-long { background-color: #0f7938; color: white; }
        .strategy-avoid { background-color: #4a5568; color: white; font-weight: 600; }
        .strategy-wait { background-color: #a0aec0; color: white; }
        .strategy-watch { background-color: #718096; color: white; }
        .strategy-neutral { background-color: #cbd5e0; color: #2d3748; }
        
        /* Tooltip styling */
        .tooltip-trigger {
            position: relative;
            cursor: help;
            border-bottom: 2px dotted #667eea;
            transition: all 0.2s ease;
        }
        
        .tooltip-trigger:hover {
            background-color: rgba(102, 126, 234, 0.08);
        }
        
        .tooltip-trigger .tooltiptext {
            visibility: hidden;
            background-color: #2d3748;
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 12px 14px;
            position: absolute;
            z-index: 1000;
            font-size: 12px;
            font-weight: 400;
            white-space: normal;
            text-decoration: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a5568;
            bottom: 125%;
            transition: visibility 0.2s ease;
            pointer-events: none;
            line-height: 1.5;
            font-family: 'Inter', sans-serif;
        }
        
        .tooltip-trigger:hover .tooltiptext {
            visibility: visible;
        }
        
        .tooltip-trigger .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 12px;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: #2d3748 transparent transparent transparent;
        }
        
        .align-strong { color: #11998e; font-weight: 700; }
        .align-medium { color: #f6ad55; font-weight: 700; }
        .align-weak { color: #f56565; font-weight: 700; }
        
        .tooltip { position: relative; cursor: help; z-index: 10; display: inline-block; }
        .tooltip .tooltiptext { visibility: hidden; background-color: #2d3748; color: #fff; text-align: left; padding: 10px 12px; border-radius: 6px; position: absolute; z-index: 1000; bottom: 125%; left: 50%; transform: translateX(-50%); white-space: normal; opacity: 0; transition: opacity 0.3s; font-size: 11px; line-height: 1.4; font-family: 'Inter', sans-serif; max-width: 200px; pointer-events: none; }
        .tooltip .tooltiptext::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #2d3748 transparent transparent transparent; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
        
        .quick-actions { background: white; border-radius: 8px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-top: 20px; }
        .action-legend { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin: 12px 0; }
        .legend-item { display: flex; align-items: center; gap: 8px; font-size: 12px; }
        .legend-dot { width: 12px; height: 12px; border-radius: 2px; }
        .legend-dot.bull { background: #38ef7d; }
        .legend-dot.bear { background: #ff6a00; }
        .legend-dot.neutral { background: #cbd5e0; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Nifty Stock Analyser</h2>
        <p class="info"><strong>Universe:</strong> banknifty | <strong>Mode:</strong> swing | <strong>Stocks Analyzed:</strong> 0 | <strong>No Data:</strong> 14 | <strong>Generated:</strong> 2026-01-22 16:08:25</p>

    
    <!-- SCREENER TABLE SECTION (FIRST) -->
    <h3>Full Screener Results</h3>
    <div class="controls">
        <div class="control-group">
            <input class="search" id="search" placeholder="Filter symbols or text..." onkeyup="filterTable()" />
        </div>
        <div class="control-group">
            <label for="sectorFilter">Sector:</label>
            <select id="sectorFilter" onchange="filterTable()">
                <option value="all">All</option>
            </select>
        </div>
        <div class="control-group">
            <label><input type="checkbox" id="enableMinConf" onchange="filterTable()" /> Min Conf%</label>
            <input type="range" id="minConf" min="0" max="100" step="1" value="0" oninput="document.getElementById('minConfVal').innerText=this.value;filterTable()" />
            <span id="minConfVal">0</span>
        </div>
        <div class="control-group">
            <label><input type="checkbox" id="enableMinScore" checked onchange="filterTable()" /> Min |Score|</label>
            <input type="range" id="minScore" min="0" max="1" step="0.01" value="0.35" oninput="document.getElementById('minScoreVal').innerText=this.value;filterTable()" />
            <span id="minScoreVal">0.35</span>
        </div>
    </div>
    
    <div id="screener-wrapper">
    <table id="screener">
        <thead>
            <tr>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Position rank by bearness score"><span class="tooltip">Rank<span class="tooltiptext">Position rank ordered by bearness score (most bearish first)</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Stock symbol"><span class="tooltip">Symbol<span class="tooltiptext">NSE stock symbol/ticker</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Industry sector"><span class="tooltip">Sector<span class="tooltiptext">Industry classification (Banking, IT, Auto, etc.)</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Price pattern"><span class="tooltip">Pattern<span class="tooltiptext">Technical pattern: golden cross, death cross, consolidation, etc.</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Trend direction"><span class="tooltip">Trend<span class="tooltiptext">Overall trend: uptrend, downtrend, or sideways</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Timeframe alignment"><span class="tooltip">TF Align<span class="tooltiptext">Alignment across timeframes (intraday/swing/longterm)</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Trading strategy"><span class="tooltip">Strategy<span class="tooltiptext">Recommended strategy (swing, breakout, mean reversion)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Bearness score -1 to +1"><span class="tooltip">Score<span class="tooltiptext">Bearness score: -1 (bullish) to +1 (bearish), 0 (neutral)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Signal confidence 0-100%"><span class="tooltip">Conf%<span class="tooltiptext">Confidence in signal (0-100%): higher = more reliable</span></span></th>
                <th data-type="str" onclick="sortTable(this, 'str')" title="Risk zone status"><span class="tooltip">Risk Zone<span class="tooltiptext">NORMAL: Safe entry | MEDIUM: Caution zone | HIGH: Extreme overbought/oversold</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option premium quality 0-1"><span class="tooltip">Opt Quality<span class="tooltiptext">Combined option quality score (0-1): Stock (20%) + Theta (45%) + Greeks (35%)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Current price"><span class="tooltip">Price<span class="tooltiptext">Current closing price in rupees</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Suggested stop loss"><span class="tooltip">Stop Loss<span class="tooltiptext">Suggested stop loss price (2.5√ó ATR from entry)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Suggested target"><span class="tooltip">Target<span class="tooltiptext">Suggested profit target (4.5√ó ATR from entry)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="52-week high"><span class="tooltip">52W High<span class="tooltiptext">52-week high price</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="52-week low"><span class="tooltip">52W Low<span class="tooltiptext">52-week low price</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Daily % change"><span class="tooltip">Daily%<span class="tooltiptext">Percentage change from yesterday's close</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Weekly % change"><span class="tooltip">Weekly%<span class="tooltiptext">Percentage change from last week's close</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="% below 52-week high"><span class="tooltip">52W High %<span class="tooltiptext">Percentage below 52-week high (pullback magnitude)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="% above 52-week low"><span class="tooltip">52W Low %<span class="tooltiptext">Percentage above 52-week low (recovery distance)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Opening range score -1 to +1"><span class="tooltip">OR<span class="tooltiptext">Opening range score: price vs first 30min high/low (-1 to +1)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="VWAP score -1 to +1"><span class="tooltip">VWAP<span class="tooltiptext">Volume-weighted average price score (-1: below, +1: above)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Price structure score -1 to +1"><span class="tooltip">Structure<span class="tooltiptext">Price structure quality (-1: weak, +1: strong reversal pattern)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="RSI momentum score"><span class="tooltip">RSI<span class="tooltiptext">Relative Strength Index score (-1 oversold to +1 overbought)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="EMA trend score -1 to +1"><span class="tooltip">EMA<span class="tooltiptext">Exponential moving average trend score (-1: bearish, +1: bullish)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Volume score -1 to +1"><span class="tooltip">Vol<span class="tooltiptext">Volume analysis score (-1: low/decreasing, +1: high/increasing)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="MACD momentum -1 to +1"><span class="tooltip">MACD<span class="tooltiptext">MACD momentum score (-1: bearish divergence, +1: bullish)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Bollinger Band score -1 to +1"><span class="tooltip">BB<span class="tooltiptext">Bollinger Band score (-1: at lower band, +1: at upper band)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Average true range"><span class="tooltip">ATR<span class="tooltiptext">Average True Range: volatility measure (stop/target distance)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option implied volatility"><span class="tooltip">Opt IV<span class="tooltiptext">Implied volatility (0-1 scale, lower = more stable)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option bid-ask spread %"><span class="tooltip">Opt Spread%<span class="tooltiptext">Bid-ask spread % (lower = more liquid)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option delta"><span class="tooltip">Opt Delta<span class="tooltiptext">Delta: directional sensitivity (0.5 = ATM, >0.5 = ITM)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option gamma"><span class="tooltip">Opt Gamma<span class="tooltiptext">Gamma: rate of delta change (higher = more sensitive)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option theta daily decay"><span class="tooltip">Opt Theta<span class="tooltiptext">Theta: daily time decay (negative = cost to buyer)</span></span></th>
                <th data-type="num" onclick="sortTable(this, 'num')" title="Option vega volatility sensitivity"><span class="tooltip">Opt Vega<span class="tooltiptext">Vega: volatility sensitivity (per 1% IV change)</span></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    </div>
    
    <!-- SIGNAL INTELLIGENCE DASHBOARD -->
    <div class="dashboard">
        <h3>Signal Intelligence</h3>
        <p class="info" style="color: #718096; font-size: 13px; margin: 8px 0;">
            <strong>üìä Understanding Your Signals:</strong> 
            The 3-Pillar system breaks confidence into: Signal Agreement (do indicators align?), Momentum (EMA/RSI conviction), Volume (does volume support the move?). 
            Early signals show when institutions enter before retail. Timeframe alignment confirms trending moves.
        </p>
    </div>
    <!-- PREMIUM SELLING STRATEGIES -->
    <div class="dashboard">
        <h3>Premium Selling Strategies</h3>
        <p class="info" style="color: #718096; font-size: 13px; margin: 8px 0;">
            <strong>üíµ Income Generation Playbook:</strong> 
            Strategies ranked by Greeks quality & IV environment. <strong>High IV (>40%)</strong> = Sell premium strategies (spreads, strangles, iron condors). 
            <strong>Theta positive</strong> = time decay in your favor. <strong>Low gamma</strong> = stable positions. <strong>Spread < 3%</strong> = good liquidity.
        </p>
    <div style="background: #fff3cd; padding: 16px; border-radius: 6px; text-align: center; color: #856404; margin: 16px 0; border-left: 4px solid #ffc107;"><strong>‚è∏Ô∏è No Ideal Setups Right Now:</strong> All stocks are in "WAIT" mode. Market conditions not favorable for aggressive premium selling. Monitor for better IV/Gamma conditions.</div></div>
    <!-- DASHBOARD SECTIONS (AFTER SCREENER TABLE) -->
    <div class="dashboard">
        <!-- KEY METRICS & MARKET SUMMARY -->
        <h3>Market Intelligence Summary</h3>
    
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; margin: 16px 0;">
            <!-- Market Sentiment -->
            <div style="background: linear-gradient(135deg, #95a5a622 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #95a5a6;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 4px;">Overall Bias</div>
                <div style="font-size: 24px; font-weight: 700; color: #95a5a6; margin-bottom: 2px;">‚ö™ NEUTRAL</div>
                <div style="font-size: 12px; color: #4a5568;">Avg Score: +0.000</div>
            </div>
            
            <!-- Confidence Level -->
            <div style="background: linear-gradient(135deg, #f39c1222 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #f39c12;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 4px;">Signal Quality</div>
                <div style="font-size: 24px; font-weight: 700; color: #f39c12; margin-bottom: 2px;">0%</div>
                <div style="font-size: 12px; color: #4a5568;">MODERATE CAUTION</div>
            </div>
            
            <!-- IV Regime -->
            <div style="background: linear-gradient(135deg, #3498db22 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #3498db;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 4px;">Option Regime</div>
                <div style="font-size: 14px; font-weight: 700; color: #3498db; margin-bottom: 2px;">0.0% IV</div>
                <div style="font-size: 11px; color: #4a5568;">DIRECTIONAL BUYING FAVORABLE</div>
            </div>
            
            <!-- Setup Distribution -->
            <div style="background: linear-gradient(135deg, #667eea22 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 8px;">Setup Distribution</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div style="text-align: center;">
                        <div style="font-size: 16px; font-weight: 700; color: #11998e;">üü¢ 0</div>
                        <div style="font-size: 10px; color: #718096;">Bullish</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 16px; font-weight: 700; color: #e74c3c;">üî¥ 0</div>
                        <div style="font-size: 10px; color: #718096;">Bearish</div>
                    </div>
                </div>
            </div>
            
            <!-- High Conviction Setups -->
            <div style="background: linear-gradient(135deg, #9f7aea22 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #9f7aea;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 4px;">High Conviction</div>
                <div style="font-size: 24px; font-weight: 700; color: #9f7aea; margin-bottom: 2px;">0</div>
                <div style="font-size: 12px; color: #4a5568;">Confidence >= 70%</div>
            </div>
            
            <!-- Liquidity Index -->
            <div style="background: linear-gradient(135deg, #4299e122 0%, transparent 100%); padding: 16px; border-radius: 8px; border-left: 4px solid #4299e1;">
                <div style="font-size: 11px; color: #718096; font-weight: 500; text-transform: uppercase; margin-bottom: 4px;">Total Watchlist</div>
                <div style="font-size: 24px; font-weight: 700; color: #4299e1; margin-bottom: 2px;">0</div>
                <div style="font-size: 12px; color: #4a5568;">Stocks analyzed</div>
            </div>
        </div>
        
        <!-- ACTION RECOMMENDATIONS -->
        <div style="background: linear-gradient(135deg, #f6ad5522 0%, transparent 100%); padding: 16px; border-radius: 8px; margin: 16px 0; border-left: 4px solid #f39c12;">
            <div style="font-size: 12px; color: #d35400; font-weight: 600; text-transform: uppercase; margin-bottom: 8px;">‚ö° Trading Recommendations</div>
            <ul style="margin: 0; padding-left: 20px; color: #4a5568; font-size: 12px; line-height: 1.6;">
                <li>
                    <strong>Market Bias:</strong> 
                    Neutral - use directional indicators for entry
                </li>
                <li>
                    <strong>Signal Quality:</strong>
                    Moderate - be selective, use tighter stops
                </li>
                <li>
                    <strong>Options Strategy:</strong>
                    Low IV favors buying directional options
                </li>
            </ul>
        </div>
    
    
    <!-- TOP PICKS SECTION -->
    <h3>Top Picks at a Glance</h3>
    <div class="top-picks-container">
    <div class="picks-card bearish"><h4>üìâ Top Bearish</h4><div class="pick-item" style="color: #a0aec0;">No bearish picks</div></div><div class="picks-card bullish"><h4>üìà Top Bullish</h4><div class="pick-item" style="color: #a0aec0;">No bullish picks</div></div></div><h3>Sectoral Heat Map</h3><div class="sector-heatmap"></div></div>    <div class="no-data">
        <p><strong>Symbols with no data (14):</strong> AUBANK, FEDERALBNK, BANKBARODA, ICICIBANK, HDFCBANK, IDFCFIRSTB, CANBK, AXISBANK, INDUSINDBK, PNB, SBIN, UNIONBANK, YESBANK, KOTAKBANK</p>
    </div>
    <script>
let lastSort = {col: null, asc: true};

function sortTable(th, type) {
    const table = document.getElementById("screener");
    const tbody = table.tBodies[0];
    const rows = Array.from(tbody.rows);
    const idx = Array.from(th.parentNode.children).indexOf(th);
    const asc = !(lastSort.col === idx && lastSort.asc);
    
    rows.sort((a, b) => {
        let cellA = a.cells[idx];
        let cellB = b.cells[idx];
        
        let va = cellA.getAttribute("data-score") || cellA.getAttribute("data-conf") || cellA.getAttribute("data-price") || cellA.innerText.trim();
        let vb = cellB.getAttribute("data-score") || cellB.getAttribute("data-conf") || cellB.getAttribute("data-price") || cellB.innerText.trim();
        
        if (type === "num") {
            va = parseFloat(va) || 0;
            vb = parseFloat(vb) || 0;
        } else {
            va = va.toLowerCase();
            vb = vb.toLowerCase();
        }
        
        if (va < vb) return asc ? -1 : 1;
        if (va > vb) return asc ? 1 : -1;
        return 0;
    });
    
    rows.forEach(r => tbody.appendChild(r));
    
    document.querySelectorAll('th').forEach(h => h.classList.remove('sort-asc', 'sort-desc'));
    if (asc) th.classList.add('sort-asc');
    else th.classList.add('sort-desc');
    
    lastSort = {col: idx, asc: asc};
}

function filterTable() {
    const v = document.getElementById("search").value.toLowerCase();
    const rows = document.getElementById("screener").tBodies[0].rows;
    const enableConf = document.getElementById("enableMinConf").checked;
    const minConf = parseFloat(document.getElementById("minConf").value) || 0;
    const enableScore = document.getElementById("enableMinScore").checked;
    const minScore = parseFloat(document.getElementById("minScore").value) || 0;
    const sectorSel = document.getElementById("sectorFilter").value.toLowerCase();
    
    for (let i = 0; i < rows.length; i++) {
        const r = rows[i];
        const textMatch = r.innerText.toLowerCase().includes(v);
        
        let confVal = 0;
        let scoreVal = 0;
        // Column positions: 0 Rank, 1 Symbol, 2 Sector, 3 Pattern, 4 Trend, 5 TF Align, 6 Strategy, 7 Score, 8 Conf%, 9 Price, 10 SL, 11 Target, 12 R:R, 13 Pos Size
        if (r.cells[8]) {
            const confText = r.cells[8].getAttribute("data-conf") || r.cells[8].innerText.trim();
            confVal = parseFloat(confText) || 0;
        }
        if (r.cells[7]) {
            const scoreText = r.cells[7].getAttribute("data-score") || r.cells[7].innerText.trim();
            scoreVal = Math.abs(parseFloat(scoreText)) || 0;
        }
        
        const sectorCell = r.cells[2] ? (r.cells[2].innerText || "").toLowerCase() : "";
        const sectorMatch = (sectorSel === "all") || (sectorCell === sectorSel);
        const confMatch = (!enableConf) || (confVal >= minConf);
        const scoreMatch = (!enableScore) || (scoreVal >= minScore);
        r.style.display = (textMatch && sectorMatch && confMatch && scoreMatch) ? "" : "none";
    }
}

// Populate sector dropdown from table rows
function populateSectors() {
    const rows = document.getElementById("screener").tBodies[0].rows;
    const sectors = new Set();
    for (let i = 0; i < rows.length; i++) {
        const cell = rows[i].cells[2];
        if (cell) {
            const sec = (cell.innerText || "").trim();
            if (sec) sectors.add(sec);
        }
    }
    const select = document.getElementById("sectorFilter");
    const existing = new Set();
    // Keep "All" default
    for (let i = select.options.length - 1; i >= 0; i--) {
        existing.add(select.options[i].value);
    }
    Array.from(sectors).sort().forEach(sec => {
        const val = sec;
        if (!existing.has(val)) {
            const opt = document.createElement("option");
            opt.value = val;
            opt.text = sec;
            select.appendChild(opt);
        }
    });
}

document.addEventListener("DOMContentLoaded", () => {
    populateSectors();
    filterTable();
});
    </script>
</body>
</html>
